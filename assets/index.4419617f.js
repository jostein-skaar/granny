var y=Object.defineProperty,b=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var h=(t,e,s)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,u=(t,e)=>{for(var s in e||(e={}))S.call(e,s)&&h(t,s,e[s]);if(p)for(var s of p(e))x.call(e,s)&&h(t,s,e[s]);return t},m=(t,e)=>b(t,w(e));var r=(t,e,s)=>(h(t,typeof e!="symbol"?e+"":e,s),s);import{P as c}from"./vendor.7bb6d1d4.js";const k=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}};k();function a(t){return t*globalThis.pixelRatio}class N extends Phaser.Scene{constructor(){super({key:"lost-scene"});r(this,"bredde");r(this,"hoyde")}init(e){this.bredde=this.game.scale.gameSize.width,this.hoyde=this.game.scale.gameSize.height}create(){const e=`Du klarte XXX
Trykk for \xE5 pr\xF8ve igjen
(Vent for \xE5 g\xE5 til meny)`;this.add.text(this.bredde/2,this.hoyde/2,e,{fontFamily:"arial",fontSize:`${a(20)}px`,color:"#fff",align:"center",backgroundColor:"#b3000c",padding:{x:a(15),y:a(15)}}).setOrigin(.5,.5),setTimeout(()=>{this.input.once("pointerdown",()=>{this.scene.start("main-scene",{})})},500)}}class P extends c.Scene{constructor(){super("main-scene");r(this,"bredde");r(this,"hoyde");r(this,"hero");r(this,"presentsGroup");r(this,"enemyGroup");r(this,"isPaused",!1);r(this,"isDead",!1);r(this,"countdownText");r(this,"playerNumber")}init(e){this.bredde=this.game.scale.gameSize.width,this.hoyde=this.game.scale.gameSize.height,console.log("playerNumber",this.playerNumber)}create(){this.enemyGroup=this.physics.add.group({allowGravity:!1,immovable:!0}),this.hero=this.physics.add.sprite(0,0,"hero"),this.hero.setPosition(this.bredde/2,this.hoyde-this.hero.height/2-a(50)),this.hero.anims.create({key:"walk",frames:this.anims.generateFrameNumbers("hero",{frames:[0,1]}),frameRate:6}),this.input.on("pointerdown",()=>{}),this.physics.add.overlap(this.hero,this.enemyGroup,(e,s)=>{this.lose()}),this.countdownText=this.add.text(this.bredde/2,this.hoyde/2,"",{fontSize:`${a(200)}px`,color:"#f3dd71",fontStyle:"bold"}).setOrigin(.5,.5),this.tweens.add({targets:this.countdownText,scale:1.4,ease:"Power0",duration:250,yoyo:!0,repeat:-1}),this.countdownText.setVisible(!1),this.startGame(),this.isDead=!1,this.input.gamepad.once("connected",e=>{console.log("connected",e)})}update(){if(this.isPaused||this.hero.play("walk",!0),this.input.gamepad.total>0){const e=this.getXValue();this.hero.setX(e)}}startGame(){this.isPaused=!1,this.physics.resume()}lose(){this.isDead||(this.isDead=!0,this.scene.pause(),this.hero.setTint(16711680),this.cameras.main.setBackgroundColor(12237498),this.cameras.main.setAlpha(.5),this.scene.launch("lost-scene",{}))}getXValue(){const e=this.playerNumber===1?0:1,s=this.input.gamepad.pad1.axes[e].value;return Math.round((s+1)/2*(400-this.hero.width))+this.hero.width/2}}class v extends c.Scene{constructor(){super({key:"preload-scene"})}preload(){console.log("preload-scene"),this.load.spritesheet("hero",`/assets/hero-sprite@${a(1)}.png?v=0.4`,{frameWidth:a(50),frameHeight:a(60),margin:1,spacing:2}),this.load.spritesheet("enemy",`/assets/enemy-sprite@${a(1)}.png?v=0.4`,{frameWidth:a(32),frameHeight:a(32),margin:1,spacing:2})}create(){this.scene.start("main-scene")}}function O(t,e,s,l,i,o){return{type:Phaser.AUTO,scene:[v,P,N],width:t*i,height:e*i,backgroundColor:11776947,autoFocus:!0,parent:"game",render:{antialias:!0},physics:{default:"arcade",arcade:{gravity:{y:0*i},debug:o}},scale:{mode:s,autoCenter:l,zoom:1/i},input:{gamepad:!0}}}let g=!0;g=!1;let n=window.devicePixelRatio;n!==1&&n!==2&&n!==3&&(n=1);n=1;globalThis.pixelRatio=n;const f=O(400,600,c.Scale.ScaleModes.NONE,c.Scale.NO_CENTER,n,g);new c.Game(m(u({},f),{callbacks:{postBoot:t=>{t.scene.getScene("main-scene").playerNumber=1}}}));new c.Game(m(u({},f),{callbacks:{postBoot:t=>{t.scene.getScene("main-scene").playerNumber=2}}}));window.onload=()=>{const t=document.querySelector("#loader"),e=document.querySelector("#content");t.style.display="none",e.style.display="block"};
