var y=Object.defineProperty,x=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var d=(t,e,i)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,m=(t,e)=>{for(var i in e||(e={}))b.call(e,i)&&d(t,i,e[i]);if(p)for(var i of p(e))T.call(e,i)&&d(t,i,e[i]);return t},u=(t,e)=>x(t,S(e));var a=(t,e,i)=>(d(t,typeof e!="symbol"?e+"":e,i),i);import{P as h}from"./vendor.7bb6d1d4.js";const w=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}};w();function s(t){return t*globalThis.pixelRatio}class k extends Phaser.Scene{constructor(){super({key:"lost-scene"});a(this,"bredde");a(this,"hoyde");a(this,"timeInMs")}init(e){this.bredde=this.game.scale.gameSize.width,this.hoyde=this.game.scale.gameSize.height,this.timeInMs=e.timeInMs}create(){const e=`Du klarte det p\xE5 ${this.timeInMs/1e3} sekunder
(Ta spaken fram og tilbake
for \xE5 pr\xF8ve igjen)`;this.add.text(this.bredde/2,this.hoyde/2,e,{fontFamily:"arial",fontSize:`${s(20)}px`,color:"#fff",align:"center",backgroundColor:"#f3dd71",padding:{x:s(15),y:s(15)}}).setOrigin(.5,.5),setTimeout(()=>{this.scene.start("main-scene",{})},4e3)}}class I extends h.Scene{constructor(){super("main-scene");a(this,"bredde");a(this,"hoyde");a(this,"map");a(this,"hero");a(this,"presentsGroup");a(this,"enemyGroup");a(this,"isPaused",!1);a(this,"isFinished",!1);a(this,"countdownText");a(this,"startTimeInMs",0);a(this,"currentTimeInMs",0);a(this,"currentSpeed",0);a(this,"playerNumber");a(this,"timeText")}init(e){this.bredde=this.game.scale.gameSize.width,this.hoyde=this.game.scale.gameSize.height,console.log("playerNumber",this.playerNumber)}create(){this.map=this.make.tilemap({key:"map"});const e=this.map.addTilesetImage(`tiles-sprite@${s(1)}`,"tiles");this.map.createLayer("level",[e]),this.enemyGroup=this.physics.add.group({allowGravity:!1,immovable:!0}),this.hero=this.physics.add.sprite(0,0,"hero"),this.hero.setPosition(this.bredde/2,this.map.heightInPixels-this.hero.height/2-s(50)),this.hero.anims.create({key:"walk",frames:this.anims.generateFrameNumbers("hero",{frames:[0,1]}),frameRate:6}),this.input.on("pointerdown",()=>{}),this.physics.add.overlap(this.hero,this.enemyGroup,(i,l)=>{this.finish()}),this.timeText=this.add.text(s(16),s(16),"",{fontSize:`${s(24)}px`,color:"#000",backgroundColor:"#ccc",padding:{x:s(5),y:s(5)}}),this.timeText.setScrollFactor(0,0),this.countdownText=this.add.text(this.bredde/2,this.hoyde/2,"",{fontSize:`${s(200)}px`,color:"#f3dd71",fontStyle:"bold"}).setOrigin(.5,.5),this.tweens.add({targets:this.countdownText,scale:1.4,ease:"Power0",duration:250,yoyo:!0,repeat:-1}),this.countdownText.setVisible(!1),this.startGame(),this.isFinished=!1,this.cameras.main.startFollow(this.hero),this.cameras.main.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.cameras.main.setFollowOffset(0,s(100))}update(e){this.currentTimeInMs=e-this.startTimeInMs,this.currentSpeed=-100+-10*this.currentTimeInMs/1e3,this.hero.setVelocityY(s(this.currentSpeed)),this.updateText(),this.isPaused||this.hero.play("walk",!0),this.input.gamepad.total>0&&this.hero.setX(this.getXValue()),this.hero.y<s(100)&&this.finish()}startGame(){this.isPaused=!1,this.physics.resume(),this.currentSpeed=-100,this.startTimeInMs=this.time.now}finish(){this.isFinished||(this.isFinished=!0,this.scene.pause(),this.hero.setTint(16711680),this.cameras.main.setBackgroundColor(12237498),this.cameras.main.setAlpha(.5),this.scene.launch("lost-scene",{timeInMs:this.currentTimeInMs}))}updateText(){let e="Tid: ";e+=""+this.currentTimeInMs/1e3,this.timeText.setText(e)}getXValue(){const e=this.playerNumber===1?0:1,i=(this.input.gamepad.pad1.axes[e].value+1)/2;return Math.round(i*(400-this.hero.width)+this.hero.width/2)}}class N extends h.Scene{constructor(){super({key:"preload-scene"})}preload(){console.log("preload-scene"),this.load.spritesheet("hero",`/assets/hero-sprite@${s(1)}.png?v=0.5`,{frameWidth:s(75),frameHeight:s(90),margin:1,spacing:2}),this.load.spritesheet("enemy",`/assets/enemy-sprite@${s(1)}.png?v=0.5`,{frameWidth:s(40),frameHeight:s(80),margin:1,spacing:2}),this.load.image("tiles",`/assets/tiles-sprite@${s(1)}.png?v=0.5`),this.load.tilemapTiledJSON("map",`assets/levels@${s(1)}.json?v=0.5`)}create(){this.scene.start("main-scene")}}function v(t,e,i,l,r,n){return{type:Phaser.AUTO,scene:[N,I,k],width:t*r,height:e*r,backgroundColor:11776947,autoFocus:!0,parent:"game",render:{antialias:!0},physics:{default:"arcade",arcade:{gravity:{y:0*r},debug:n}},scale:{mode:i,autoCenter:l,zoom:1/r},input:{gamepad:!0}}}let f=!0;f=!1;let o=window.devicePixelRatio;o!==1&&o!==2&&o!==3&&(o=1);globalThis.pixelRatio=o;const g=v(400,600,h.Scale.ScaleModes.NONE,h.Scale.NO_CENTER,o,f);new h.Game(u(m({},g),{callbacks:{postBoot:t=>{t.scene.getScene("main-scene").playerNumber=1}}}));new h.Game(u(m({},g),{callbacks:{postBoot:t=>{t.scene.getScene("main-scene").playerNumber=2}}}));window.onload=()=>{const t=document.querySelector("#loader"),e=document.querySelector("#content");t.style.display="none",e.style.display="block"};
