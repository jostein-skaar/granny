var y=Object.defineProperty,x=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var d=(t,e,s)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,m=(t,e)=>{for(var s in e||(e={}))b.call(e,s)&&d(t,s,e[s]);if(p)for(var s of p(e))S.call(e,s)&&d(t,s,e[s]);return t},u=(t,e)=>x(t,T(e));var r=(t,e,s)=>(d(t,typeof e!="symbol"?e+"":e,s),s);import{P as h}from"./vendor.7bb6d1d4.js";const w=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}};w();function i(t){return t*globalThis.pixelRatio}class I extends Phaser.Scene{constructor(){super({key:"lost-scene"});r(this,"bredde");r(this,"hoyde");r(this,"timeInMs");r(this,"scoreText")}init(){console.log("lost-scene: init"),this.bredde=this.game.scale.gameSize.width,this.hoyde=this.game.scale.gameSize.height}create(){console.log("lost-scene: create"),this.scoreText=this.add.text(this.bredde/2,this.hoyde/2,"",{fontFamily:"arial",fontSize:`${i(20)}px`,color:"#333",align:"center",backgroundColor:"#f3dd71",padding:{x:i(15),y:i(15)}}).setOrigin(.5,.5),this.events.on("resume",(e,s)=>{console.log("lost-scene: resume"),this.timeInMs=s.timeInMs,this.updateText(),setTimeout(()=>{this.scene.pause(),this.scene.bringToTop("main-scene"),this.scene.resume("main-scene")},2e3)})}updateText(){this.scoreText.setText(`Du klarte det p\xE5 ${(this.timeInMs/1e3).toFixed(2)} sekunder
(Ta spaken fram og tilbake
for \xE5 pr\xF8ve igjen)`)}}class v extends h.Scene{constructor(){super("main-scene");r(this,"bredde");r(this,"hoyde");r(this,"map");r(this,"hero");r(this,"presentsGroup");r(this,"enemyGroup");r(this,"isPaused",!1);r(this,"isFinished",!1);r(this,"countdownText");r(this,"startTimeInMs",0);r(this,"currentTimeInMs",0);r(this,"currentSpeed",0);r(this,"playerNumber");r(this,"timeText");r(this,"finishLineText")}init(e){this.bredde=this.game.scale.gameSize.width,this.hoyde=this.game.scale.gameSize.height,console.log("main-scene: init")}create(){console.log("main-scene: create"),this.events.on("resume",()=>{console.log("main-scene: resume"),this.prepareNewGame()}),this.map=this.make.tilemap({key:"map"});const e=this.map.addTilesetImage(`tiles-sprite@${i(1)}`,"tiles");this.map.createLayer("level",[e]),this.enemyGroup=this.physics.add.group({allowGravity:!1,immovable:!0}),this.finishLineText=this.add.text(this.bredde/2,i(10),"M\xE5l",{fontSize:`${i(150)}px`,color:"#333"}),this.finishLineText.setOrigin(.5,0),this.hero=this.physics.add.sprite(0,0,"hero"),this.hero.anims.create({key:"walk",frames:this.anims.generateFrameNumbers("hero",{frames:[0,1]}),frameRate:6}),this.input.on("pointerdown",()=>{}),this.physics.add.overlap(this.hero,this.enemyGroup,(s,c)=>{this.finish()}),this.timeText=this.add.text(i(16),i(16),"",{fontSize:`${i(24)}px`,color:"#000",backgroundColor:"#ccc",padding:{x:i(5),y:i(5)}}),this.timeText.setScrollFactor(0,0),this.countdownText=this.add.text(this.bredde/2,this.map.heightInPixels-this.hoyde/2,"",{fontFamily:"Helvetica ",fontSize:`${i(200)}px`,color:"#f3dd71",fontStyle:"bold"}).setOrigin(.5,.5),this.tweens.add({targets:this.countdownText,scale:1.4,ease:"Power0",duration:250,yoyo:!0,repeat:-1}),this.prepareNewGame(),this.cameras.main.startFollow(this.hero),this.cameras.main.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.cameras.main.setFollowOffset(0,i(100))}update(e){if(this.input.gamepad.total>0&&this.hero.setX(this.getXValue()),this.isPaused){this.hero.setVelocityY(0);return}this.hero.play("walk",!0),this.currentTimeInMs=e-this.startTimeInMs,this.currentSpeed=-100+-10*this.currentTimeInMs/1e3,this.hero.setVelocityY(i(this.currentSpeed)),this.updateText(),this.hero.y<i(100)&&this.finish()}prepareNewGame(){this.hero.setPosition(this.bredde/2,this.map.heightInPixels-this.hero.height/2-i(50)),this.isFinished=!1,this.isPaused=!0,this.currentSpeed=0;let e=3;if(e>0){this.countdownText.setVisible(!0),this.countdownText.setText(e.toString());const s=setInterval(()=>{e--,this.countdownText.setText(e.toString()),e<=0&&(this.countdownText.setVisible(!1),this.startGame(),clearInterval(s))},1e3)}else this.countdownText.setVisible(!1),this.startGame()}startGame(){this.isPaused=!1,this.currentSpeed=-100,this.startTimeInMs=this.time.now,this.currentTimeInMs=0,this.updateText(),this.timeText.setVisible(!0)}finish(){this.isFinished||(this.isFinished=!0,this.timeText.setVisible(!1),this.scene.pause(),this.scene.bringToTop("lost-scene"),this.scene.resume("lost-scene",{timeInMs:this.currentTimeInMs}))}updateText(){this.timeText.setText("Tid: "+(this.currentTimeInMs/1e3).toFixed(2))}getXValue(){const e=this.playerNumber===1?0:1,s=(this.input.gamepad.pad1.axes[e].value+1)/2;return Math.round(s*(400-this.hero.width)+this.hero.width/2)}}class N extends h.Scene{constructor(){super({key:"preload-scene"})}preload(){console.log("preload-scene"),this.load.spritesheet("hero",`/assets/hero-sprite@${i(1)}.png?v=0.6`,{frameWidth:i(75),frameHeight:i(90),margin:1,spacing:2}),this.load.spritesheet("enemy",`/assets/enemy-sprite@${i(1)}.png?v=0.6`,{frameWidth:i(40),frameHeight:i(80),margin:1,spacing:2}),this.load.image("tiles",`/assets/tiles-sprite@${i(1)}.png?v=0.6`),this.load.tilemapTiledJSON("map",`assets/levels@${i(1)}.json?v=0.6`)}create(){this.scene.launch("lost-scene"),this.scene.pause("lost-scene"),this.scene.start("main-scene"),this.scene.bringToTop("main-scene")}}function k(t,e,s,c,n,o){return{type:Phaser.AUTO,scene:[N,v,I],width:t*n,height:e*n,backgroundColor:11776947,autoFocus:!0,parent:"game",render:{antialias:!0},physics:{default:"arcade",arcade:{gravity:{y:0*n},debug:o}},scale:{mode:s,autoCenter:c,zoom:1/n},input:{gamepad:!0}}}let g=!0;g=!1;let a=window.devicePixelRatio;a!==1&&a!==2&&a!==3&&(a=1);globalThis.pixelRatio=a;const f=k(400,600,h.Scale.ScaleModes.NONE,h.Scale.NO_CENTER,a,g);new h.Game(u(m({},f),{callbacks:{postBoot:t=>{t.scene.getScene("main-scene").playerNumber=1}}}));new h.Game(u(m({},f),{callbacks:{postBoot:t=>{t.scene.getScene("main-scene").playerNumber=2}}}));window.onload=()=>{const t=document.querySelector("#loader"),e=document.querySelector("#content");t.style.display="none",e.style.display="block"};
